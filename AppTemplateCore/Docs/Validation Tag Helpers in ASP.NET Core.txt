Validation Tag Helpers in ASP.NET Core

The ASP.NET provides validation related tag helpers which display the 
validation messages to the user. 

We learned how server-side model validation works in the previous tutorial. 

BINDS AND VALIDATES HTTP DATA & CREATES THE MODEL STATE OBJECT
AND PROVIDE THIS IN THE CONTROLLER.

The MODEL BINDER BINDS AND VALIDATES the 
DATA RECEIVED OVER THE HTTP REQUEST

MODEL BINDER CREATES THE MODEL STATE OBJECT.

It then creates the ModelState object, which contains the validation messages 
generated by the Model Binder. IF THEY ARE VALIDATION ERRORS IN DATA

The Validation Tag helpers generate the HTML element to display these messages in the view.

GENERATE HTML ELEMENTS TO DISPLAY ERROR MESSAGES

VALIDATION TAG HELPERS ARE NEEDED IN CASE OF BOTH SERVER SIDE VALIDATION 
AND CLIENT SIDE VALIDATION

Validation Tag Helpers
Validation Message Tag Helper
Validation Summary Tag Helper
All OPTION
ModelOnly OPTION
None OPTION
Summary

DISPLAY THE VALIDATION MESSAGE ON VIEW

Validation Tag Helpers
The ASP.NET Core provides two Tag Helpers to display the 
Validation message on the client side.
WORKS FOR BOTH CLIENT AND SERVER SIDE VALIDATION

Validation Message Tag Helper VM
Validation Summary Tag Helper VS

Validation Message Tag Helper
VALIDATOIN MESSAGE FOR FIELD
The validation message tag helper targets the <span> element and 
is used to display a validation message for the property specified in its attribute.

For Example

[Required]
Public string name {get;set;}

CODE FOR ELEMENT
================
<label asp-for="Name">Name</label>
<input asp-for="Name" />
SPAN CONTAINER FOR VALIDATION MESSAGES
<span asp-validation-for="Name"></span>
<br />

The following HTML is generated. Note that <span> element is empty and 
field-validation-valid class is applied to it.

FIELD VALIDATION VALID

HTML GENERATED class="field-validation-valid"
=============================
<label for="Name">Name</label>
<input type="text" data-val="true" data-val-required="The Name field is required." id="Name" name="Name" value="" />
<span class="field-validation-valid" data-valmsg-for="Name" data-valmsg-replace="true"></span>
 
WHEN WE SUBMIT THE FORM, THE NEW HTML IS GENERATED WITH THE 
ERROR MESSAGE. NEW CSS CLASS IS APPLIED.
DOM IS REGENRATED WHEN WE SUBMIT THE FORM.

And when you submit the form with an empty name field. 
The following HTML is generated. 
Note that the <span> element now contains the error message and 
field-validation-error class is applied to it.

HTML GENERATED WHEN VALIDATION FAILS class="field-validation-error"
================================================================
<label for="Name">Name</label>
<input type="text" class="input-validation-error" data-val="true" data-val-required="The Name field is required." id="Name" name="Name" value="" />
<span class="field-validation-error" data-valmsg-for="Name" data-valmsg-replace="true">The Name field is required.</span>

FIELD VALIDATION ERROR CLASS
IF NOT ADDED, THEN FORM WHERE THIS CLASS IS COMING.
SOME GLOBAL OR SYSTEM LEVEL CSS.

Add the following style into the top of the view or include it in your stylesheet.

<style>
    .field-validation-error { color:red }
</style>

You should be able to see the validation message is displayed in the red colour.

========================================================

Validation Summary Tag Helper

The validation summary tag helper targets the HTML <div> element and 
is used to display the all of forms validation error messages at one place. 

Each error message is displayed in an unordered list.

The asp-validation-summary tag helper is placed at the top of the form 
so as to display the error message.

You need to specify three values to asp-validation-summary tag helper. 
All, ModelOnly or None.

All=============================================

This Option displays all the validation errors.

<div asp-validation-summary="All"></div>
 
This would generate the following HTML when there are no validation messages to display

<div class="validation-summary-valid" data-valmsg-summary="true">
  <ul><li style="display:none"></li></ul>
</div>

And generates the following HTML, when there is a model error

<div class="validation-summary-errors" data-valmsg-summary="true">
    <ul><li>The Name field is required.</li></ul>
</div>

To display the ERROR caption 

<div asp-validation-summary="All">
    <span>Please correct the following errors</span>
</div>
 
And add the following style

.validation-summary-valid span { display: none; }

=============================================================

ModelOnly

This Option displays ONLY THE Model level validation error. 
The Property Model errors are not displayed. 
Use this option if you are displaying the property validation error using the 
asp-validation-for tag helper.

<div asp-validation-summary="ModelOnly"></div>
 
Strangely this does not generate any HTML, when the ModelState is Valid, unlike the option All.

You can add the Model level error directly in the Model using

ModelState.AddModelError(string.Empty, "Errors occurred in the Model");

The following HTML gets generated when the error occurs,

<div class="validation-summary-errors">
    <ul><li>Errors occurred in the Model</li></ul>
</div>

=======================================================================

None
The Tag Helpers will not display any error message, 
This is the same as not adding the Tag Helper.

Note that validation-summary-valid class is added when the model is valid 
(not when “All” Option is selected) and it is replaced by 
validation-summary-errors when the model is invalid.

Adding the following style changes the error message text colour to red.

<style>
    .validation-summary-errors { color:red }
</style>

You can show the caption to the error messages

<div asp-validation-summary="ModelOnly">
    <span>Please correct the following errors</span>
</div>
 
The caption is displayed only when the error is displayed.

Summary
In this article, we looked at How to use Validation tag helpers 
to display the validation messages to the user.
